<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-title>
      Trouver un restaurant
    </ion-title>
    <ion-img src="/assets/icon/vaudvin_logo.png" class="img-toolbar" slot="end"></ion-img>
  </ion-toolbar>
</ion-header>
<ion-content>
  <ion-list>
    <app-searchbar></app-searchbar>
    <div *ngIf="isLoading && cpt===0" class="loading-spinner">
      <ion-spinner name="bubbles" color="primary"></ion-spinner>
    </div>
    <div *ngIf="restaurants.length === 0" [hidden]="isLoading">
      <h3 style="text-align: center; margin-top:30px">Aucun restaurant ne correspond Ã  cette recherche.</h3>
    </div>
  </ion-list>
  <agm-map [latitude]="lat" [longitude]="lng" [scrollwheel]="false" [zoom]="zoom" id="map">
    <agm-marker *ngFor="let mark of lstLocalisations" [(latitude)]="mark.lat" [longitude]="mark.lng" (markerClick)="openIW(infoWindow)">
      <agm-info-window id="infoWindow" style="text-align: center" maxWidth="30px">
        <p>
          <span><b>{{mark.restaurant.res_name}}</b></span><br/>
          <span>{{mark.restaurant.res_address_1}}</span><br/>
          <span>{{mark.restaurant.res_zip_code}} {{mark.restaurant.res_city}}</span><br/>
          <b><a class="info-link" (click)="goToWineCard(mark.restaurant)">Afficher la carte des vins</a></b>
        </p>
      </agm-info-window>
    </agm-marker>
    <agm-marker [(latitude)]="lat" [longitude]="lng" [iconUrl]="icon"></agm-marker>
  </agm-map>
</ion-content>